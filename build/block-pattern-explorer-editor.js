!function(){var e={184:function(e,t){var r;!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)){if(r.length){var l=a.apply(null,r);l&&e.push(l)}}else if("object"===o)if(r.toString===Object.prototype.toString)for(var s in r)n.call(r,s)&&r[s]&&e.push(s);else e.push(r.toString())}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e=window.wp.element,t=window.lodash,n=window.wp.i18n,a=window.wp.data,o=window.wp.components,l=window.wp.primitives,s=(0,e.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(l.Path,{d:"M18 5.5H6a.5.5 0 00-.5.5v3h13V6a.5.5 0 00-.5-.5zm.5 5H10v8h8a.5.5 0 00.5-.5v-7.5zm-10 0h-3V18a.5.5 0 00.5.5h2.5v-8zM6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2z"}));function c(t){const{patternCategories:r,patternCategoryTypes:a,selectedCategory:l,setSelectedCategory:s,searchValue:c,setSearchValue:i}=t,p=(0,e.useMemo)((()=>a.map((e=>e.name))),[a]),d="block-pattern-explorer__sidebar";return(0,e.createElement)("div",{className:d},(0,e.createElement)("div",{className:`${d}__search`},(0,e.createElement)(o.SearchControl,{value:c,onChange:i,label:(0,n.__)("Search patterns","block-pattern-explorer")})),a.map((t=>{const n=r.filter((e=>"uncategorized"===t.name?!e?.categoryTypes||e.categoryTypes.every((e=>!p.includes(e))):e.categoryTypes?.includes(t.name)));return n.length?(0,e.createElement)("div",{key:t,className:`${d}__category-type`},t?.hideLabelFromVision?(0,e.createElement)(o.VisuallyHidden,{as:"h2"},t.label):(0,e.createElement)("h2",{className:`${d}__category-type__title`},t.label),(0,e.createElement)("div",{className:`${d}__category-type__categories`},(0,e.createElement)(o.MenuGroup,{className:`${d}__categories-list`},n.map((t=>(0,e.createElement)(o.MenuItem,{key:t.name,label:t.label,className:`${d}__categories-list__item`,isPressed:!c&&t.name===l,onClick:()=>function(e){s(e),i("")}(t.name)},t.label)))))):null})))}var i=window.wp.compose,p=window.wp.a11y,d=r(184),u=r.n(d),m=(0,e.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(l.Path,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"})),g=(0,e.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(l.Path,{d:"M5 4v11h14V4H5zm3 15.8h8v-1.5H8v1.5z"})),h=(0,e.createElement)(l.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)(l.Path,{d:"M6 5.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5V6a.5.5 0 01.5-.5zM4 6a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2H6a2 2 0 01-2-2V6zm11-.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5h-3a.5.5 0 01-.5-.5V6a.5.5 0 01.5-.5zM13 6a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2h-3a2 2 0 01-2-2V6zm5 8.5h-3a.5.5 0 00-.5.5v3a.5.5 0 00.5.5h3a.5.5 0 00.5-.5v-3a.5.5 0 00-.5-.5zM15 13a2 2 0 00-2 2v3a2 2 0 002 2h3a2 2 0 002-2v-3a2 2 0 00-2-2h-3zm-9 1.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5v-3a.5.5 0 01.5-.5zM4 15a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2H6a2 2 0 01-2-2v-3z",fillRule:"evenodd",clipRule:"evenodd"}));function v(t){const{viewportWidth:r,setViewportWidth:a,isGrid:l,setIsGrid:s,shownPatterns:c,searchValue:i,isLoading:p}=t,d=[{label:(0,n.__)("Desktop","block-pattern-explorer"),slug:"desktop",value:1300,active:1300===r},{label:(0,n.__)("Tablet","block-pattern-explorer"),slug:"tablet",value:778,active:778===r},{label:(0,n.__)("Mobile","block-pattern-explorer"),slug:"mobile",value:358,active:358===r}],v="block-pattern-explorer__preview-header";return(0,e.createElement)("div",{className:v},(0,e.createElement)("div",{className:`${v}__search-results`},p&&(0,e.createElement)(o.Spinner,null),i&&i.length>1&&(0,n.sprintf)(// translators: %1$d: Number of patterns. %2$s: The search input.
(0,n._n)('%1$d search result for "%2$s"','%1$d search results for "%2$s"',c.length,"block-pattern-explorer"),c.length,i)),(0,e.createElement)("div",{className:`${v}__controls`},(0,e.createElement)(o.DropdownMenu,{icon:"",text:(0,n.__)("Preview","block-pattern-explorer"),className:"viewport-toggle",toggleProps:{isTertiary:!0},popoverProps:{focusOnMount:"container",position:"bottom left"}},(()=>(0,e.createElement)(o.MenuGroup,null,d.map((t=>(0,e.createElement)(o.MenuItem,{key:t.slug,className:u()({disabled:!t.active}),icon:t.active?m:"",onClick:()=>function(e){e.active||a(e.value)}(t)},t.label)))))),(0,e.createElement)(o.Button,{label:(0,n.__)("Individual Pattern","block-pattern-explorer"),icon:g,isPressed:!l,onClick:()=>s(!l)}),(0,e.createElement)(o.Button,{label:(0,n.__)("Grid View","block-pattern-explorer"),icon:h,isPressed:l,onClick:()=>s(!l)})))}function y(){return y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},y.apply(this,arguments)}var b=function(t){let{icon:r,size:n=24,...a}=t;return(0,e.cloneElement)(r,{width:n,height:n,...a})},_=(0,e.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(l.Path,{d:"M19 8h-1V6h-5v2h-2V6H6v2H5c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8c0-1.1-.9-2-2-2zm.5 10c0 .3-.2.5-.5.5H5c-.3 0-.5-.2-.5-.5v-8c0-.3.2-.5.5-.5h14c.3 0 .5.2.5.5v8z"})),w=function(t){let{icon:r,label:a}=t;return(0,e.createElement)("div",{className:"block-editor-inserter__no-results"},(0,e.createElement)("div",null,(0,e.createElement)(b,{className:"block-editor-inserter__no-results-icon",icon:r||_}),(0,e.createElement)("p",null,a||(0,n.__)("No results found.","block-pattern-explorer"))))},k=(0,e.createContext)(),f=function(t){let{children:r}=t;const n=(0,o.__unstableUseCompositeState)({shift:!0,wrap:"horizontal"});return(0,e.createElement)(k.Provider,{value:n},r)},E=window.wp.blocks,x=window.wp.blockEditor;function C(t){const{pattern:r,onInsertPattern:l,viewportWidth:s,composite:c,isBlock:p,clientId:d}=t,{title:u,categories:m=[],blocks:g}=r,{createSuccessNotice:h}=(0,a.useDispatch)("core/notices"),v=`preview-pattern-card__info-description-${(0,i.useInstanceId)(C)}`;function b(){l(g.map((e=>(0,E.cloneBlock)(e)))),p&&(0,a.dispatch)("core/block-editor").removeBlock(d),h((0,n.sprintf)(// Translators: Name of the pattern being inserted.
(0,n.__)('Block pattern "%s" inserted.',"block-pattern-explorer"),r.title),{type:"snackbar"})}const _="block-pattern-explorer__preview-pattern-list__item";return(0,e.createElement)("div",{className:_,"aria-label":r.title,"aria-describedby":r?.description?v:void 0},(0,e.createElement)(o.__unstableCompositeItem,y({role:"option",as:"div"},c,{className:`${_}-preview`,onClick:b}),(0,e.createElement)(x.BlockPreview,{blocks:g,viewportWidth:s})),(0,e.createElement)("div",{className:`${_}-actions`},(0,e.createElement)("div",{className:`${_}-title`},u),!!r.description&&(0,e.createElement)(o.VisuallyHidden,{id:v},r.description),(0,e.createElement)(o.Button,{isSecondary:!0,onClick:b},(0,n.__)("Add Pattern","block-pattern-explorer"))))}function P(r){const{isGrid:l,isLoading:s,searchValue:c,shownPatterns:i,viewportWidth:d}=r,[m,v]=function(r){let{rootClientId:o="",insertionIndex:l,clientId:s,isAppender:c,onSelect:i,shouldFocusBlock:d=!0}={shouldFocusBlock:!0};const{getSelectedBlock:u}=(0,a.useSelect)(x.store),{destinationRootClientId:m,destinationIndex:g}=(0,a.useSelect)((e=>{const{getSelectedBlockClientId:t,getBlockRootClientId:r,getBlockIndex:n,getBlockOrder:a}=e(x.store),i=t();let p,d=o;return void 0!==l?p=l:s?p=n(s,d):!c&&i?(d=r(i),p=n(i,d)+1):p=a(d).length,{destinationRootClientId:d,destinationIndex:p}}),[o,l,s,c]),{replaceBlocks:h,insertBlocks:v,showInsertionPoint:y,hideInsertionPoint:b}=(0,a.useDispatch)(x.store),_=(0,e.useCallback)((function(e,r){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=u();!c&&o&&(0,E.isUnmodifiedDefaultBlock)(o)?h(o.clientId,e,null,d||a?0:null,r):v(e,g,m,!0,d||a?0:null,r);const l=(0,n.sprintf)(// translators: %d: the name of the block that has been added
(0,n._n)("%d block added.","%d blocks added.",(0,t.castArray)(e).length),(0,t.castArray)(e).length);(0,p.speak)(l),i&&i()}),[c,u,h,v,m,g,i,d]),w=(0,e.useCallback)((e=>{e?y(m,g):b()}),[y,b,m,g]);return[m,_,w]}(),b=(0,t.isEmpty)(i)&&!c&&!s,_=(0,t.isEmpty)(i)&&c,k=!b&&!_,P=!k&&_?(0,n.__)("No search results found.","block-pattern-explorer"):(0,n.__)("No patterns were found for this category.","block-pattern-explorer"),S=(0,o.__unstableUseCompositeState)();return(0,e.createElement)(f,null,!k&&(0,e.createElement)(w,{icon:l?h:g,label:P}),k&&(0,e.createElement)(o.__unstableComposite,y({},S,{role:"listbox",className:u()("block-pattern-explorer__preview-pattern-list",{"is-grid":l,"is-loading":s,"preview-tablet":778===d,"preview-mobile":358===d}),"aria-label":(0,n.__)("Patterns","block-pattern-explorer")}),i.map((t=>(0,e.createElement)(C,{key:t.name,pattern:t,onInsertPattern:v,viewportWidth:d,composite:S})))))}function S(r){const{allPatterns:a,patternCategories:o,selectedCategory:l,searchValue:s}=r,[c,d]=(0,e.useState)(1300),[u,m]=(0,e.useState)(!0),g=(0,i.useDebounce)(p.speak,500),h=(0,e.useMemo)((()=>o.map((e=>e.name))),[o]),y=(0,e.useMemo)((()=>{let e=[];const r=s&&s.length>1;return r&&(e=a.filter((e=>{const r=s.toLowerCase();if(e.title.toLowerCase().includes(r))return!0;if(e?.keywords&&!(0,t.isEmpty)(e?.keywords)){const n=e.keywords.filter((e=>e.includes(r)));return!(0,t.isEmpty)(n)}return!1}))),r||(e=a.filter((e=>"uncategorized"===l?!e.categories?.length||e.categories.every((e=>!h.includes(e))):e.categories?.includes(l)))),e}),[s,l,a]),b=(0,i.useAsyncList)(y,{step:3}),_=b.length<y.length;return(0,e.useEffect)((()=>{if(!s||_)return;const e=y.length,t=(0,n.sprintf)(
/* translators: %d: number of patterns found. */
(0,n._n)("%d pattern found.","%d patterns found.",e,"block-pattern-explorer"),e);g(t)}),[s,g]),(0,e.createElement)("div",{className:"block-pattern-explorer__preview"},(0,e.createElement)(v,{viewportWidth:c,setViewportWidth:d,isGrid:u,setIsGrid:m,shownPatterns:b,searchValue:s,isLoading:_}),(0,e.createElement)(P,{viewportWidth:c,isGrid:u,shownPatterns:b,searchValue:s,isLoading:_}))}function V(t){const{allPatterns:r,initialCategory:n,patternCategories:a,patternCategoryTypes:o}=t,[l,s]=(0,e.useState)(n?.name),[i,p]=(0,e.useState)("");return(0,e.createElement)("div",{className:"block-pattern-explorer"},(0,e.createElement)(c,{patternCategories:a,patternCategoryTypes:o,selectedCategory:l,setSelectedCategory:s,searchValue:i,setSearchValue:p}),(0,e.createElement)(S,{allPatterns:r,patternCategories:a,selectedCategory:l,searchValue:i}))}var z=window.wp.notices;function B(){const[r,l]=(0,e.useState)(!1),[c,i,p]=((r,o)=>{const{patterns:l,patternCategories:s,patternCategoryTypes:c}=(0,a.useSelect)((e=>{var t;const{__experimentalGetAllowedPatterns:r,getSettings:n}=e(x.store),{getEntityRecord:a}=e("core"),l=a("block-pattern-explorer/v1","patternCategoryTypes");return{patterns:r(o),patternCategories:n().__experimentalBlockPatternCategories,patternCategoryTypes:null!==(t=l?.patternCategoryTypes)&&void 0!==t?t:"fetching"}}),[o]),{createSuccessNotice:i}=(0,a.useDispatch)(z.store);return[l,s,c,(0,e.useCallback)(((e,a)=>{r((0,t.map)(a,(e=>(0,E.cloneBlock)(e))),e.name),i((0,n.sprintf)(
/* translators: %s: block pattern title. */
(0,n.__)('Block pattern "%s" inserted.',"block-pattern-explorer"),e.title),{type:"snackbar"})}),[])]})(),d="fetching"===p?[]:p,u=(0,e.useCallback)((e=>!(!e.categories||!e.categories.length)&&e.categories.some((e=>i.some((t=>t.name===e))))),[i]),m=(0,e.useCallback)((e=>!(!e.categoryTypes||!e.categoryTypes.length)&&e.categoryTypes.some((e=>d.some((t=>t.name===e))))),[d]),g=(0,e.useMemo)((()=>{const e=i.filter((e=>c.some((t=>t.categories?.includes(e.name))))).sort(((e,t)=>{let{name:r}=e,{name:n}=t;return[r,n].includes("featured")?"featured"===r?-1:1:0}));return c.some((e=>!u(e)))&&!e.find((e=>"uncategorized"===e.name))&&e.push({name:"uncategorized",label:(0,n.__)("Uncategorized","block-pattern-explorer")}),e}),[c,i]),h=(0,e.useMemo)((()=>{const e=d.filter((e=>g.some((t=>t.categoryTypes?.includes(e.name)))));return g.some((e=>!m(e)))&&!e.find((e=>"uncategorized"===e.name))&&e.unshift({name:"uncategorized",label:(0,n.__)("Uncategorized","block-pattern-explorer"),hideLabelFromVision:!0}),e}),[g,d]),v=g.filter((e=>"uncategorized"===h[0].name?!e.categoryTypes||!e.categoryTypes.length||e.categoryTypes?.includes("uncategorized"):e.categoryTypes?.includes(h[0].name)))[0];return(0,t.isEmpty)(c)?null:(0,e.createElement)(e.Fragment,null,(0,e.createElement)(o.Button,{icon:s,label:(0,n.__)("Explore Patterns","block-pattern-explorer"),onClick:()=>l(!0)}),r&&(0,e.createElement)(o.Modal,{title:(0,n.__)("Patterns","block-pattern-explorer"),closeLabel:(0,n.__)("Close","block-pattern-explorer"),onRequestClose:()=>l(!1),className:"block-pattern-explorer__modal",isFullScreen:!0},(0,e.createElement)(V,{allPatterns:c,initialCategory:v,patternCategories:g,patternCategoryTypes:h,categoryTypes:!0})))}(0,a.subscribe)((()=>{document.querySelector("#block-pattern-explorer")||wp.domReady((()=>{const t=document.querySelector(".edit-post-header-toolbar__left");if(!t)return;const r=document.createElement("div");r.id="block-pattern-explorer",t.appendChild(r),(0,e.render)((0,e.createElement)(B,null),document.getElementById("block-pattern-explorer"))}))})),(0,a.dispatch)("core").addEntities([{label:(0,n.__)("Pattern Category Types","block-pattern-explorer"),kind:"block-pattern-explorer/v1",name:"patternCategoryTypes",baseURL:"/block-pattern-explorer/v1/pattern-category-types"}])}()}();