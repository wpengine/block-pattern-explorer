!function(){var e={184:function(e,t){var r;!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)){if(r.length){var l=a.apply(null,r);l&&e.push(l)}}else if("object"===o)if(r.toString===Object.prototype.toString)for(var s in r)n.call(r,s)&&r[s]&&e.push(s);else e.push(r.toString())}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e=window.wp.element,t=window.lodash,n=window.wp.i18n,a=(window.wp.hooks,window.wp.data),o=window.wp.components,l=window.wp.primitives,s=(0,e.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(l.Path,{d:"M18 5.5H6a.5.5 0 00-.5.5v3h13V6a.5.5 0 00-.5-.5zm.5 5H10v8h8a.5.5 0 00.5-.5v-7.5zm-10 0h-3V18a.5.5 0 00.5.5h2.5v-8zM6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2z"})),c=r(184),i=r.n(c),p=window.wp.compose,d=(0,e.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(l.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})),u=function({icon:t,size:r=24,...n}){return(0,e.cloneElement)(t,{width:r,height:r,...n})},m=(0,e.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(l.Path,{d:"M13.5 6C10.5 6 8 8.5 8 11.5c0 1.1.3 2.1.9 3l-3.4 3 1 1.1 3.4-2.9c1 .9 2.2 1.4 3.6 1.4 3 0 5.5-2.5 5.5-5.5C19 8.5 16.5 6 13.5 6zm0 9.5c-2.2 0-4-1.8-4-4s1.8-4 4-4 4 1.8 4 4-1.8 4-4 4z"})),v=function t({className:r,onChange:a,value:l,label:s,placeholder:c=(0,n.__)("Search"),hideLabelFromVision:v=!0,help:h}){const g=(0,p.useInstanceId)(t),w=(0,e.useRef)(),_=`components-search-control-${g}`;return(0,e.createElement)(o.BaseControl,{label:s,id:_,hideLabelFromVision:v,help:h,className:i()(r,"components-search-control")},(0,e.createElement)("div",{className:"components-search-control__input-wrapper"},(0,e.createElement)("input",{ref:w,className:"components-search-control__input",id:_,type:"search",placeholder:c,onChange:e=>a(e.target.value),autoComplete:"off",value:l||""}),(0,e.createElement)("div",{className:"components-search-control__icon"},!!l&&(0,e.createElement)(o.Button,{icon:d,label:(0,n.__)("Reset search"),onClick:()=>{a(""),w.current.focus()}}),!l&&(0,e.createElement)(u,{icon:m}))))};function h(t){const{patternCategories:r,patternCategoryTypes:a,selectedCategory:l,setSelectedCategory:s,searchValue:c,setSearchValue:i}=t,p=(0,e.useMemo)((()=>a.map((e=>e.name))),[a]),d="block-pattern-explorer__sidebar";return(0,e.createElement)("div",{className:d},(0,e.createElement)("div",{className:`${d}__search`},(0,e.createElement)(v,{value:c,onChange:i,label:(0,n.__)("Search patterns","block-pattern-explorer")})),a.map((t=>{const n=r.filter((e=>{return"uncategorized"===t.name?!(null!=e&&e.categoryTypes)||e.categoryTypes.every((e=>!p.includes(e))):null===(r=e.categoryTypes)||void 0===r?void 0:r.includes(t.name);var r}));if(n.length)return(0,e.createElement)("div",{className:`${d}__category-type`},null!=t&&t.hideLabelFromVision?(0,e.createElement)(o.VisuallyHidden,{as:"h2"},t.label):(0,e.createElement)("h2",{className:`${d}__category-type__title`},t.label),(0,e.createElement)("div",{className:`${d}__category-type__categories`},(0,e.createElement)(o.MenuGroup,{className:`${d}__categories-list`},n.map((t=>(0,e.createElement)(o.MenuItem,{key:t.name,label:t.label,className:`${d}__categories-list__item`,isPressed:!c&&t.name===l,onClick:()=>function(e){s(e),i("")}(t.name)},t.label))))))})))}var g=window.wp.a11y,w=(0,e.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(l.Path,{d:"M18.3 5.6L9.9 16.9l-4.6-3.4-.9 1.2 5.8 4.3 9.3-12.6z"})),_=(0,e.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(l.Path,{d:"M5 4v11h14V4H5zm3 15.8h8v-1.5H8v1.5z"})),b=(0,e.createElement)(l.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)(l.Path,{d:"M6 5.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5V6a.5.5 0 01.5-.5zM4 6a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2H6a2 2 0 01-2-2V6zm11-.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5h-3a.5.5 0 01-.5-.5V6a.5.5 0 01.5-.5zM13 6a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2h-3a2 2 0 01-2-2V6zm5 8.5h-3a.5.5 0 00-.5.5v3a.5.5 0 00.5.5h3a.5.5 0 00.5-.5v-3a.5.5 0 00-.5-.5zM15 13a2 2 0 00-2 2v3a2 2 0 002 2h3a2 2 0 002-2v-3a2 2 0 00-2-2h-3zm-9 1.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5v-3a.5.5 0 01.5-.5zM4 15a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2H6a2 2 0 01-2-2v-3z",fillRule:"evenodd",clipRule:"evenodd"}));function y(t){const{viewportWidth:r,setViewportWidth:a,isGrid:l,setIsGrid:s,shownPatterns:c,searchValue:p,isLoading:d}=t,u=[{label:(0,n.__)("Desktop","block-pattern-explorer"),slug:"desktop",value:1300,active:1300===r},{label:(0,n.__)("Tablet","block-pattern-explorer"),slug:"tablet",value:778,active:778===r},{label:(0,n.__)("Mobile","block-pattern-explorer"),slug:"mobile",value:358,active:358===r}],m="block-pattern-explorer__preview-header";return(0,e.createElement)("div",{className:m},(0,e.createElement)("div",{className:`${m}__search-results`},d&&(0,e.createElement)(o.Spinner,null),p&&p.length>1&&(0,n.sprintf)(// translators: %1$d: Number of patterns. %2$s: The search input.
(0,n._n)('%1$d search result for "%2$s"','%1$d search results for "%2$s"',c.length,"block-pattern-explorer"),c.length,p)),(0,e.createElement)("div",{className:`${m}__controls`},(0,e.createElement)(o.DropdownMenu,{icon:"",text:(0,n.__)("Preview","block-pattern-explorer"),className:"viewport-toggle",toggleProps:{isTertiary:!0},popoverProps:{focusOnMount:"container"}},(({onClose:t})=>(0,e.createElement)(e.Fragment,null,u.map(((t,r)=>(0,e.createElement)(o.MenuItem,{key:t.slug,className:i()({disabled:!t.active}),icon:t.active?w:"",onClick:()=>function(e){e.active||a(e.value)}(t)},t.label)))))),(0,e.createElement)(o.Button,{label:(0,n.__)("Individual Pattern","block-pattern-explorer"),icon:_,isPressed:!l,onClick:()=>s(!l)}),(0,e.createElement)(o.Button,{label:(0,n.__)("Grid View","block-pattern-explorer"),icon:b,isPressed:l,onClick:()=>s(!l)})))}function f(){return f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f.apply(this,arguments)}var k=(0,e.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(l.Path,{d:"M19 8h-1V6h-5v2h-2V6H6v2H5c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8c0-1.1-.9-2-2-2zm.5 10c0 .3-.2.5-.5.5H5c-.3 0-.5-.2-.5-.5v-8c0-.3.2-.5.5-.5h14c.3 0 .5.2.5.5v8z"})),E=function({icon:t,label:r}){return(0,e.createElement)("div",{className:"block-editor-inserter__no-results"},(0,e.createElement)(u,{className:"block-editor-inserter__no-results-icon",icon:t||k}),(0,e.createElement)("p",null,r||(0,n.__)("No results found.","block-pattern-explorer")))},x=(0,e.createContext)(),C=function({children:t}){const r=(0,o.__unstableUseCompositeState)({shift:!0,wrap:"horizontal"});return(0,e.createElement)(x.Provider,{value:r},t)},P=window.wp.blocks,S=window.wp.blockEditor;function V(t){const{pattern:r,onInsertPattern:l,viewportWidth:s,composite:c,isBlock:i,clientId:d}=t,{title:u,categories:m=[],blocks:v}=r,{createSuccessNotice:h}=(0,a.useDispatch)("core/notices"),g=`preview-pattern-card__info-description-${(0,p.useInstanceId)(V)}`;function w(){l(v.map((e=>(0,P.cloneBlock)(e)))),i&&(0,a.dispatch)("core/block-editor").removeBlock(d),h((0,n.sprintf)(// Translators: Name of the pattern being inserted.
(0,n.__)('Block pattern "%s" inserted.',"block-pattern-explorer"),r.title),{type:"snackbar"})}null==r||r.imagePreview;const _="block-pattern-explorer__preview-pattern-list__item";return(0,e.createElement)("div",{className:_,"aria-label":r.title,"aria-describedby":null!=r&&r.description?g:void 0},(0,e.createElement)(o.__unstableCompositeItem,f({role:"option",as:"div"},c,{className:`${_}-preview`,onClick:w}),(0,e.createElement)(S.BlockPreview,{blocks:v,viewportWidth:s})),(0,e.createElement)("div",{className:`${_}-actions`},(0,e.createElement)("div",{className:`${_}-title`},u),!!r.description&&(0,e.createElement)(o.VisuallyHidden,{id:g},r.description),(0,e.createElement)(o.Button,{isSecondary:!0,onClick:w},(0,n.__)("Add Pattern","block-pattern-explorer"))))}function z(r){const{isGrid:l,isLoading:s,searchValue:c,shownPatterns:p,viewportWidth:d}=r,[u,m]=function({rootClientId:r="",insertionIndex:o,clientId:l,isAppender:s,onSelect:c,shouldFocusBlock:i=!0}){const{getSelectedBlock:p}=(0,a.useSelect)(S.store),{destinationRootClientId:d,destinationIndex:u}=(0,a.useSelect)((e=>{const{getSelectedBlockClientId:t,getBlockRootClientId:n,getBlockIndex:a,getBlockOrder:c}=e(S.store),i=t();let p,d=r;return void 0!==o?p=o:l?p=a(l,d):!s&&i?(d=n(i),p=a(i,d)+1):p=c(d).length,{destinationRootClientId:d,destinationIndex:p}}),[r,o,l,s]),{replaceBlocks:m,insertBlocks:v,showInsertionPoint:h,hideInsertionPoint:w}=(0,a.useDispatch)(S.store),_=(0,e.useCallback)(((e,r,a=!1)=>{const o=p();!s&&o&&(0,P.isUnmodifiedDefaultBlock)(o)?m(o.clientId,e,null,i||a?0:null,r):v(e,u,d,!0,i||a?0:null,r);const l=(0,n.sprintf)(// translators: %d: the name of the block that has been added
(0,n._n)("%d block added.","%d blocks added.",(0,t.castArray)(e).length),(0,t.castArray)(e).length);(0,g.speak)(l),c&&c()}),[s,p,m,v,d,u,c,i]),b=(0,e.useCallback)((e=>{e?h(d,u):w()}),[h,w,d,u]);return[d,_,b]}({shouldFocusBlock:!0}),v=(0,t.isEmpty)(p)&&!c&&!s,h=(0,t.isEmpty)(p)&&c,w=!v&&!h,y=!w&&h?(0,n.__)("No search results found.","block-pattern-explorer"):(0,n.__)("No patterns were found for this category.","block-pattern-explorer"),k=(0,o.__unstableUseCompositeState)();return(0,e.createElement)(C,null,!w&&(0,e.createElement)(E,{icon:l?b:_,label:y}),w&&(0,e.createElement)(o.__unstableComposite,f({},k,{role:"listbox",className:i()("block-pattern-explorer__preview-pattern-list",{"is-grid":l,"is-loading":s,"preview-tablet":778===d,"preview-mobile":358===d}),"aria-label":(0,n.__)("Patterns","block-pattern-explorer")}),p.map((t=>(0,e.createElement)(V,{key:t.name,pattern:t,onInsertPattern:m,viewportWidth:d,composite:k})))))}function B(r){const{allPatterns:a,patternCategories:o,selectedCategory:l,searchValue:s}=r,[c,i]=(0,e.useState)(1300),[d,u]=(0,e.useState)(!0),m=(0,p.useDebounce)(g.speak,500),v=(0,e.useMemo)((()=>o.map((e=>e.name))),[o]),h=(0,e.useMemo)((()=>{let e=[];const r=s&&s.length>1;return r&&(e=a.filter((e=>{const r=s.toLowerCase();if(e.title.toLowerCase().includes(r))return!0;if(null!=e&&e.keywords&&!(0,t.isEmpty)(null==e?void 0:e.keywords)){const n=e.keywords.filter((e=>e.includes(r)));return!(0,t.isEmpty)(n)}return!1}))),r||(e=a.filter((e=>{var t,r;return"uncategorized"===l?!(null!==(t=e.categories)&&void 0!==t&&t.length)||e.categories.every((e=>!v.includes(e))):null===(r=e.categories)||void 0===r?void 0:r.includes(l)}))),e}),[s,l,a]),w=(0,p.useAsyncList)(h,{step:3}),_=w.length<h.length;return(0,e.useEffect)((()=>{if(!s||_)return;const e=h.length,t=sprintf(
/* translators: %d: number of patterns found. */
(0,n._n)("%d pattern found.","%d patterns found.",e,"block-pattern-explorer"),e);m(t)}),[s,m]),(0,e.createElement)("div",{className:"block-pattern-explorer__preview"},(0,e.createElement)(y,{viewportWidth:c,setViewportWidth:i,isGrid:d,setIsGrid:u,shownPatterns:w,searchValue:s,isLoading:_}),(0,e.createElement)(z,{viewportWidth:c,isGrid:d,shownPatterns:w,searchValue:s,isLoading:_}))}function N(t){const{allPatterns:r,initialCategory:n,patternCategories:a,patternCategoryTypes:o}=t,[l,s]=(0,e.useState)(null==n?void 0:n.name),[c,i]=(0,e.useState)("");return(0,e.createElement)("div",{className:"block-pattern-explorer"},(0,e.createElement)(h,{patternCategories:a,patternCategoryTypes:o,selectedCategory:l,setSelectedCategory:s,searchValue:c,setSearchValue:i}),(0,e.createElement)(B,{allPatterns:r,patternCategories:a,selectedCategory:l,searchValue:c}))}var I=window.wp.notices;function M(){const[r,l]=(0,e.useState)(!1),[c,i,p]=((r,o)=>{const{patterns:l,patternCategories:s,patternCategoryTypes:c}=(0,a.useSelect)((e=>{var t;const{__experimentalGetAllowedPatterns:r,getSettings:n}=e(S.store),{getEntityRecord:a}=e("core"),l=a("block-pattern-explorer/v1","patternCategoryTypes");return{patterns:r(o),patternCategories:n().__experimentalBlockPatternCategories,patternCategoryTypes:null!==(t=null==l?void 0:l.patternCategoryTypes)&&void 0!==t?t:"fetching"}}),[o]),{createSuccessNotice:i}=(0,a.useDispatch)(I.store);return[l,s,c,(0,e.useCallback)(((e,a)=>{r((0,t.map)(a,(e=>(0,P.cloneBlock)(e))),e.name),i((0,n.sprintf)(
/* translators: %s: block pattern title. */
(0,n.__)('Block pattern "%s" inserted.',"block-pattern-explorer"),e.title),{type:"snackbar"})}),[])]})(),d="fetching"===p?[]:p;if((0,t.isEmpty)(c))return null;const u=(0,e.useCallback)((e=>!(!e.categories||!e.categories.length)&&e.categories.some((e=>i.some((t=>t.name===e))))),[i]),m=(0,e.useCallback)((e=>!(!e.categoryTypes||!e.categoryTypes.length)&&e.categoryTypes.some((e=>d.some((t=>t.name===e))))),[d]),v=(0,e.useMemo)((()=>{const e=i.filter((e=>c.some((t=>{var r;return null===(r=t.categories)||void 0===r?void 0:r.includes(e.name)})))).sort((({name:e},{name:t})=>[e,t].includes("featured")?"featured"===e?-1:1:0));return c.some((e=>!u(e)))&&!e.find((e=>"uncategorized"===e.name))&&e.push({name:"uncategorized",label:(0,n.__)("Uncategorized","block-pattern-explorer")}),e}),[c,i]),h=(0,e.useMemo)((()=>{const e=d.filter((e=>v.some((t=>{var r;return null===(r=t.categoryTypes)||void 0===r?void 0:r.includes(e.name)}))));return v.some((e=>!m(e)))&&!e.find((e=>"uncategorized"===e.name))&&e.unshift({name:"uncategorized",label:(0,n.__)("Uncategorized","block-pattern-explorer"),hideLabelFromVision:!0}),e}),[v,d]),g=v.filter((e=>{var t,r;return"uncategorized"===h[0].name?!e.categoryTypes||!e.categoryTypes.length||(null===(r=e.categoryTypes)||void 0===r?void 0:r.includes("uncategorized")):null===(t=e.categoryTypes)||void 0===t?void 0:t.includes(h[0].name)}))[0];return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(o.Button,{icon:s,label:(0,n.__)("Explore Patterns","block-pattern-explorer"),onClick:()=>l(!0),disabled:"fetching"===p}),r&&(0,e.createElement)(o.Modal,{title:(0,n.__)("Patterns","block-pattern-explorer"),closeLabel:(0,n.__)("Close","block-pattern-explorer"),onRequestClose:()=>l(!1),className:"block-pattern-explorer__modal"},(0,e.createElement)(N,{allPatterns:c,initialCategory:g,patternCategories:v,patternCategoryTypes:h,categoryTypes:!0})))}(0,a.subscribe)((()=>{document.querySelector("#block-pattern-explorer")||wp.domReady((()=>{const t=document.querySelector(".edit-post-header-toolbar__left");if(!t)return;const r=document.createElement("div");r.id="block-pattern-explorer",t.appendChild(r),(0,e.render)((0,e.createElement)(M,null),document.getElementById("block-pattern-explorer"))}))})),(0,a.dispatch)("core").addEntities([{label:(0,n.__)("Pattern Category Types","block-pattern-explorer"),kind:"block-pattern-explorer/v1",name:"patternCategoryTypes",baseURL:"/block-pattern-explorer/v1/pattern-category-types"}])}()}();