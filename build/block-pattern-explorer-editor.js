!function(){var e={184:function(e,t){var r;!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)){if(r.length){var l=a.apply(null,r);l&&e.push(l)}}else if("object"===o)if(r.toString===Object.prototype.toString)for(var s in r)n.call(r,s)&&r[s]&&e.push(s);else e.push(r.toString())}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e=window.wp.element,t=window.lodash,n=window.wp.i18n,a=window.wp.data,o=window.wp.components,l=window.wp.primitives,s=(0,e.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(l.Path,{d:"M18 5.5H6a.5.5 0 00-.5.5v3h13V6a.5.5 0 00-.5-.5zm.5 5H10v8h8a.5.5 0 00.5-.5v-7.5zm-10 0h-3V18a.5.5 0 00.5.5h2.5v-8zM6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2z"}));function i(t){const{patternCategories:r,patternCategoryTypes:a,selectedCategory:l,setSelectedCategory:s,searchValue:i,setSearchValue:c}=t,p=(0,e.useMemo)((()=>a.map((e=>e.name))),[a]),u="block-pattern-explorer__sidebar";return(0,e.createElement)("div",{className:u},(0,e.createElement)("div",{className:`${u}__search`},(0,e.createElement)(o.SearchControl,{value:i,onChange:c,label:(0,n.__)("Search patterns","block-pattern-explorer")})),a.map((t=>{const n=r.filter((e=>{var r;return"uncategorized"===t.name?!(null!=e&&e.categoryTypes)||e.categoryTypes.every((e=>!p.includes(e))):null===(r=e.categoryTypes)||void 0===r?void 0:r.includes(t.name)}));return n.length?(0,e.createElement)("div",{key:t,className:`${u}__category-type`},null!=t&&t.hideLabelFromVision?(0,e.createElement)(o.VisuallyHidden,{as:"h2"},t.label):(0,e.createElement)("h2",{className:`${u}__category-type__title`},t.label),(0,e.createElement)("div",{className:`${u}__category-type__categories`},(0,e.createElement)(o.MenuGroup,{className:`${u}__categories-list`},n.map((t=>(0,e.createElement)(o.MenuItem,{key:t.name,label:t.label,className:`${u}__categories-list__item`,isPressed:!i&&t.name===l,onClick:()=>function(e){s(e),c("")}(t.name)},t.label)))))):null})))}var c=window.wp.compose,p=window.wp.a11y,u=r(184),d=r.n(u),m=(0,e.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(l.Path,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"})),v=(0,e.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(l.Path,{d:"M5 4v11h14V4H5zm3 15.8h8v-1.5H8v1.5z"})),g=(0,e.createElement)(l.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)(l.Path,{d:"M6 5.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5V6a.5.5 0 01.5-.5zM4 6a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2H6a2 2 0 01-2-2V6zm11-.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5h-3a.5.5 0 01-.5-.5V6a.5.5 0 01.5-.5zM13 6a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2h-3a2 2 0 01-2-2V6zm5 8.5h-3a.5.5 0 00-.5.5v3a.5.5 0 00.5.5h3a.5.5 0 00.5-.5v-3a.5.5 0 00-.5-.5zM15 13a2 2 0 00-2 2v3a2 2 0 002 2h3a2 2 0 002-2v-3a2 2 0 00-2-2h-3zm-9 1.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5v-3a.5.5 0 01.5-.5zM4 15a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2H6a2 2 0 01-2-2v-3z",fillRule:"evenodd",clipRule:"evenodd"}));function h(t){const{viewportWidth:r,setViewportWidth:a,isGrid:l,setIsGrid:s,shownPatterns:i,searchValue:c,isLoading:p}=t,u=[{label:(0,n.__)("Desktop","block-pattern-explorer"),slug:"desktop",value:1300,active:1300===r},{label:(0,n.__)("Tablet","block-pattern-explorer"),slug:"tablet",value:778,active:778===r},{label:(0,n.__)("Mobile","block-pattern-explorer"),slug:"mobile",value:358,active:358===r}],h="block-pattern-explorer__preview-header";return(0,e.createElement)("div",{className:h},(0,e.createElement)("div",{className:`${h}__search-results`},p&&(0,e.createElement)(o.Spinner,null),c&&c.length>1&&(0,n.sprintf)(// translators: %1$d: Number of patterns. %2$s: The search input.
(0,n._n)('%1$d search result for "%2$s"','%1$d search results for "%2$s"',i.length,"block-pattern-explorer"),i.length,c)),(0,e.createElement)("div",{className:`${h}__controls`},(0,e.createElement)(o.DropdownMenu,{icon:"",text:(0,n.__)("Preview","block-pattern-explorer"),className:"viewport-toggle",toggleProps:{isTertiary:!0},popoverProps:{focusOnMount:"container",position:"bottom left"}},(()=>(0,e.createElement)(o.MenuGroup,null,u.map((t=>(0,e.createElement)(o.MenuItem,{key:t.slug,className:d()({disabled:!t.active}),icon:t.active?m:"",onClick:()=>function(e){e.active||a(e.value)}(t)},t.label)))))),(0,e.createElement)(o.Button,{label:(0,n.__)("Individual Pattern","block-pattern-explorer"),icon:v,isPressed:!l,onClick:()=>s(!l)}),(0,e.createElement)(o.Button,{label:(0,n.__)("Grid View","block-pattern-explorer"),icon:g,isPressed:l,onClick:()=>s(!l)})))}function y(){return y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},y.apply(this,arguments)}var b=function(t){let{icon:r,size:n=24,...a}=t;return(0,e.cloneElement)(r,{width:n,height:n,...a})},_=(0,e.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(l.Path,{d:"M19 8h-1V6h-5v2h-2V6H6v2H5c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8c0-1.1-.9-2-2-2zm.5 10c0 .3-.2.5-.5.5H5c-.3 0-.5-.2-.5-.5v-8c0-.3.2-.5.5-.5h14c.3 0 .5.2.5.5v8z"})),w=function(t){let{icon:r,label:a}=t;return(0,e.createElement)("div",{className:"block-editor-inserter__no-results"},(0,e.createElement)("div",null,(0,e.createElement)(b,{className:"block-editor-inserter__no-results-icon",icon:r||_}),(0,e.createElement)("p",null,a||(0,n.__)("No results found.","block-pattern-explorer"))))},k=(0,e.createContext)(),f=function(t){let{children:r}=t;const n=(0,o.__unstableUseCompositeState)({shift:!0,wrap:"horizontal"});return(0,e.createElement)(k.Provider,{value:n},r)},E=window.wp.blocks,x=window.wp.blockEditor;function C(t){const{pattern:r,onInsertPattern:l,viewportWidth:s,composite:i,isBlock:p,clientId:u}=t,{title:d,categories:m=[],blocks:v}=r,{createSuccessNotice:g}=(0,a.useDispatch)("core/notices"),h=`preview-pattern-card__info-description-${(0,c.useInstanceId)(C)}`;function b(){l(v.map((e=>(0,E.cloneBlock)(e)))),p&&(0,a.dispatch)("core/block-editor").removeBlock(u),g((0,n.sprintf)(// Translators: Name of the pattern being inserted.
(0,n.__)('Block pattern "%s" inserted.',"block-pattern-explorer"),r.title),{type:"snackbar"})}const _="block-pattern-explorer__preview-pattern-list__item";return(0,e.createElement)("div",{className:_,"aria-label":r.title,"aria-describedby":null!=r&&r.description?h:void 0},(0,e.createElement)(o.__unstableCompositeItem,y({role:"option",as:"div"},i,{className:`${_}-preview`,onClick:b}),(0,e.createElement)(x.BlockPreview,{blocks:v,viewportWidth:s})),(0,e.createElement)("div",{className:`${_}-actions`},(0,e.createElement)("div",{className:`${_}-title`},d),!!r.description&&(0,e.createElement)(o.VisuallyHidden,{id:h},r.description),(0,e.createElement)(o.Button,{isSecondary:!0,onClick:b},(0,n.__)("Add Pattern","block-pattern-explorer"))))}function P(r){const{isGrid:l,isLoading:s,searchValue:i,shownPatterns:c,viewportWidth:u}=r,[m,h]=function(r){let{rootClientId:o="",insertionIndex:l,clientId:s,isAppender:i,onSelect:c,shouldFocusBlock:u=!0}={shouldFocusBlock:!0};const{getSelectedBlock:d}=(0,a.useSelect)(x.store),{destinationRootClientId:m,destinationIndex:v}=(0,a.useSelect)((e=>{const{getSelectedBlockClientId:t,getBlockRootClientId:r,getBlockIndex:n,getBlockOrder:a}=e(x.store),c=t();let p,u=o;return void 0!==l?p=l:s?p=n(s,u):!i&&c?(u=r(c),p=n(c,u)+1):p=a(u).length,{destinationRootClientId:u,destinationIndex:p}}),[o,l,s,i]),{replaceBlocks:g,insertBlocks:h,showInsertionPoint:y,hideInsertionPoint:b}=(0,a.useDispatch)(x.store),_=(0,e.useCallback)((function(e,r){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=d();!i&&o&&(0,E.isUnmodifiedDefaultBlock)(o)?g(o.clientId,e,null,u||a?0:null,r):h(e,v,m,!0,u||a?0:null,r);const l=(0,n.sprintf)(// translators: %d: the name of the block that has been added
(0,n._n)("%d block added.","%d blocks added.",(0,t.castArray)(e).length),(0,t.castArray)(e).length);(0,p.speak)(l),c&&c()}),[i,d,g,h,m,v,c,u]),w=(0,e.useCallback)((e=>{e?y(m,v):b()}),[y,b,m,v]);return[m,_,w]}(),b=(0,t.isEmpty)(c)&&!i&&!s,_=(0,t.isEmpty)(c)&&i,k=!b&&!_,P=!k&&_?(0,n.__)("No search results found.","block-pattern-explorer"):(0,n.__)("No patterns were found for this category.","block-pattern-explorer"),S=(0,o.__unstableUseCompositeState)();return(0,e.createElement)(f,null,!k&&(0,e.createElement)(w,{icon:l?g:v,label:P}),k&&(0,e.createElement)(o.__unstableComposite,y({},S,{role:"listbox",className:d()("block-pattern-explorer__preview-pattern-list",{"is-grid":l,"is-loading":s,"preview-tablet":778===u,"preview-mobile":358===u}),"aria-label":(0,n.__)("Patterns","block-pattern-explorer")}),c.map((t=>(0,e.createElement)(C,{key:t.name,pattern:t,onInsertPattern:h,viewportWidth:u,composite:S})))))}function S(r){const{allPatterns:a,patternCategories:o,selectedCategory:l,searchValue:s}=r,[i,u]=(0,e.useState)(1300),[d,m]=(0,e.useState)(!0),v=(0,c.useDebounce)(p.speak,500),g=(0,e.useMemo)((()=>o.map((e=>e.name))),[o]),y=(0,e.useMemo)((()=>{let e=[];const r=s&&s.length>1;return r&&(e=a.filter((e=>{const r=s.toLowerCase();if(e.title.toLowerCase().includes(r))return!0;if(null!=e&&e.keywords&&!(0,t.isEmpty)(null==e?void 0:e.keywords)){const n=e.keywords.filter((e=>e.includes(r)));return!(0,t.isEmpty)(n)}return!1}))),r||(e=a.filter((e=>{var t,r;return"uncategorized"===l?!(null!==(r=e.categories)&&void 0!==r&&r.length)||e.categories.every((e=>!g.includes(e))):null===(t=e.categories)||void 0===t?void 0:t.includes(l)}))),e}),[s,l,a]),b=(0,c.useAsyncList)(y,{step:3}),_=b.length<y.length;return(0,e.useEffect)((()=>{if(!s||_)return;const e=y.length,t=(0,n.sprintf)(
/* translators: %d: number of patterns found. */
(0,n._n)("%d pattern found.","%d patterns found.",e,"block-pattern-explorer"),e);v(t)}),[s,v]),(0,e.createElement)("div",{className:"block-pattern-explorer__preview"},(0,e.createElement)(h,{viewportWidth:i,setViewportWidth:u,isGrid:d,setIsGrid:m,shownPatterns:b,searchValue:s,isLoading:_}),(0,e.createElement)(P,{viewportWidth:i,isGrid:d,shownPatterns:b,searchValue:s,isLoading:_}))}function V(t){const{allPatterns:r,initialCategory:n,patternCategories:a,patternCategoryTypes:o}=t,[l,s]=(0,e.useState)(null==n?void 0:n.name),[c,p]=(0,e.useState)("");return(0,e.createElement)("div",{className:"block-pattern-explorer"},(0,e.createElement)(i,{patternCategories:a,patternCategoryTypes:o,selectedCategory:l,setSelectedCategory:s,searchValue:c,setSearchValue:p}),(0,e.createElement)(S,{allPatterns:r,patternCategories:a,selectedCategory:l,searchValue:c}))}var z=window.wp.notices;function B(){const[r,l]=(0,e.useState)(!1),[i,c,p]=((r,o)=>{const{patterns:l,patternCategories:s,patternCategoryTypes:i}=(0,a.useSelect)((e=>{var t;const{__experimentalGetAllowedPatterns:r,getSettings:n}=e(x.store),{getEntityRecord:a}=e("core"),l=a("block-pattern-explorer/v1","patternCategoryTypes");return{patterns:r(o),patternCategories:n().__experimentalBlockPatternCategories,patternCategoryTypes:null!==(t=null==l?void 0:l.patternCategoryTypes)&&void 0!==t?t:"fetching"}}),[o]),{createSuccessNotice:c}=(0,a.useDispatch)(z.store);return[l,s,i,(0,e.useCallback)(((e,a)=>{r((0,t.map)(a,(e=>(0,E.cloneBlock)(e))),e.name),c((0,n.sprintf)(
/* translators: %s: block pattern title. */
(0,n.__)('Block pattern "%s" inserted.',"block-pattern-explorer"),e.title),{type:"snackbar"})}),[])]})(),u="fetching"===p?[]:p,d=(0,e.useCallback)((e=>!(!e.categories||!e.categories.length)&&e.categories.some((e=>c.some((t=>t.name===e))))),[c]),m=(0,e.useCallback)((e=>!(!e.categoryTypes||!e.categoryTypes.length)&&e.categoryTypes.some((e=>u.some((t=>t.name===e))))),[u]),v=(0,e.useMemo)((()=>{const e=c.filter((e=>i.some((t=>{var r;return null===(r=t.categories)||void 0===r?void 0:r.includes(e.name)})))).sort(((e,t)=>{let{name:r}=e,{name:n}=t;return[r,n].includes("featured")?"featured"===r?-1:1:0}));return i.some((e=>!d(e)))&&!e.find((e=>"uncategorized"===e.name))&&e.push({name:"uncategorized",label:(0,n.__)("Uncategorized","block-pattern-explorer")}),e}),[i,c]),g=(0,e.useMemo)((()=>{const e=u.filter((e=>v.some((t=>{var r;return null===(r=t.categoryTypes)||void 0===r?void 0:r.includes(e.name)}))));return v.some((e=>!m(e)))&&!e.find((e=>"uncategorized"===e.name))&&e.unshift({name:"uncategorized",label:(0,n.__)("Uncategorized","block-pattern-explorer"),hideLabelFromVision:!0}),e}),[v,u]),h=v.filter((e=>{var t,r;return"uncategorized"===g[0].name?!e.categoryTypes||!e.categoryTypes.length||(null===(r=e.categoryTypes)||void 0===r?void 0:r.includes("uncategorized")):null===(t=e.categoryTypes)||void 0===t?void 0:t.includes(g[0].name)}))[0];return(0,t.isEmpty)(i)?null:(0,e.createElement)(e.Fragment,null,(0,e.createElement)(o.Button,{icon:s,label:(0,n.__)("Explore Patterns","block-pattern-explorer"),onClick:()=>l(!0)}),r&&(0,e.createElement)(o.Modal,{title:(0,n.__)("Patterns","block-pattern-explorer"),closeLabel:(0,n.__)("Close","block-pattern-explorer"),onRequestClose:()=>l(!1),className:"block-pattern-explorer__modal",isFullScreen:!0},(0,e.createElement)(V,{allPatterns:i,initialCategory:h,patternCategories:v,patternCategoryTypes:g,categoryTypes:!0})))}(0,a.subscribe)((()=>{document.querySelector("#block-pattern-explorer")||wp.domReady((()=>{const t=document.querySelector(".edit-post-header-toolbar__left");if(!t)return;const r=document.createElement("div");r.id="block-pattern-explorer",t.appendChild(r),(0,e.render)((0,e.createElement)(B,null),document.getElementById("block-pattern-explorer"))}))})),(0,a.dispatch)("core").addEntities([{label:(0,n.__)("Pattern Category Types","block-pattern-explorer"),kind:"block-pattern-explorer/v1",name:"patternCategoryTypes",baseURL:"/block-pattern-explorer/v1/pattern-category-types"}])}()}();